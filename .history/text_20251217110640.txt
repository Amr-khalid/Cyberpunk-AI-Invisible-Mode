<mxfile host="app.diagrams.net" modified="2025-12-17T00:00:00.000Z" agent="GPT" version="22.1.0">
  <diagram name="Use Case" compressed="false">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="850" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- System boundary -->
        <mxCell id="sys" value="RPS Game API System" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="220" y="80" width="620" height="380" as="geometry"/>
        </mxCell>

        <!-- Actors -->
        <mxCell id="actor_player" value="Player" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;" vertex="1" parent="1">
          <mxGeometry x="60" y="170" width="60" height="120" as="geometry"/>
        </mxCell>

        <mxCell id="actor_admin" value="Admin" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;" vertex="1" parent="1">
          <mxGeometry x="60" y="320" width="60" height="120" as="geometry"/>
        </mxCell>

        <!-- Use cases (ellipses) -->
        <mxCell id="uc_play" value="Play Round&#xa;POST /play" style="ellipse;whiteSpace=wrap;html=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="420" y="150" width="240" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="uc_stats" value="Get Stats&#xa;GET /" style="ellipse;whiteSpace=wrap;html=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="420" y="250" width="240" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="uc_reset" value="Reset Stats&#xa;POST/GET /reset" style="ellipse;whiteSpace=wrap;html=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="420" y="350" width="240" height="70" as="geometry"/>
        </mxCell>

        <!-- Notes -->
        <mxCell id="note1" value="Input: move (0..2) + user/session id&#xa;Output: ai_move + result + mode + stats" style="shape=note;whiteSpace=wrap;html=1;size=16;" vertex="1" parent="1">
          <mxGeometry x="690" y="140" width="260" height="110" as="geometry"/>
        </mxCell>

        <!-- Connectors -->
        <mxCell id="e1" style="endArrow=none;html=1;strokeWidth=2;" edge="1" parent="1" source="actor_player" target="uc_play">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e2" style="endArrow=none;html=1;strokeWidth=2;" edge="1" parent="1" source="actor_player" target="uc_stats">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e3" style="endArrow=none;html=1;strokeWidth=2;" edge="1" parent="1" source="actor_admin" target="uc_reset">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e4" style="endArrow=none;html=1;strokeWidth=2;" edge="1" parent="1" source="actor_admin" target="uc_stats">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e5" style="dashed=1;endArrow=open;html=1;" edge="1" parent="1" source="uc_play" target="note1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>

  <diagram name="Class Diagram" compressed="false">
    <mxGraphModel dx="1400" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Controller -->
        <mxCell id="cls_controller" value="GameController&#xa;----------------&#xa;+ POST_play(req): json&#xa;+ GET_stats(req): json&#xa;+ POST_reset(req): json" style="shape=rectangle;whiteSpace=wrap;html=1;rounded=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="60" y="80" width="300" height="140" as="geometry"/>
        </mxCell>

        <!-- Service -->
        <mxCell id="cls_service" value="GameService&#xa;----------------&#xa;- store: StateStore&#xa;- predictor: Predictor&#xa;----------------&#xa;+ play(userId, userMove): PlayResponse&#xa;+ getStats(userId): Stats&#xa;+ reset(userId): void" style="shape=rectangle;whiteSpace=wrap;html=1;rounded=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="420" y="80" width="360" height="180" as="geometry"/>
        </mxCell>

        <!-- Interfaces -->
        <mxCell id="iface_store" value="&lt;&lt;interface&gt;&gt;&#xa;StateStore&#xa;----------------&#xa;+ load(userId): GameState&#xa;+ save(state): void&#xa;+ reset(userId): void" style="shape=rectangle;whiteSpace=wrap;html=1;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="840" y="60" width="320" height="160" as="geometry"/>
        </mxCell>

        <mxCell id="iface_pred" value="&lt;&lt;interface&gt;&gt;&#xa;Predictor&#xa;----------------&#xa;+ chooseAiMove(state, userMove): Move" style="shape=rectangle;whiteSpace=wrap;html=1;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="840" y="260" width="320" height="110" as="geometry"/>
        </mxCell>

        <!-- Domain -->
        <mxCell id="cls_state" value="GameState&#xa;----------------&#xa;+ userId: string&#xa;+ lastMove: Move&#xa;+ stats: Stats&#xa;+ history: List&lt;Move&gt;" style="shape=rectangle;whiteSpace=wrap;html=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="420" y="300" width="320" height="140" as="geometry"/>
        </mxCell>

        <mxCell id="cls_stats" value="Stats&#xa;----------------&#xa;+ wins: int&#xa;+ losses: int&#xa;+ ties: int&#xa;----------------&#xa;+ update(userMove, aiMove): Result" style="shape=rectangle;whiteSpace=wrap;html=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="420" y="470" width="320" height="150" as="geometry"/>
        </mxCell>

        <mxCell id="cls_response" value="PlayResponse&#xa;----------------&#xa;+ userMove: Move&#xa;+ aiMove: Move&#xa;+ result: Result&#xa;+ mode: string&#xa;+ stats: Stats" style="shape=rectangle;whiteSpace=wrap;html=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="60" y="300" width="300" height="160" as="geometry"/>
        </mxCell>

        <!-- Enums -->
        <mxCell id="enm_move" value="&lt;&lt;enum&gt;&gt;&#xa;Move&#xa;----------------&#xa;ROCK=0&#xa;PAPER=1&#xa;SCISSORS=2" style="shape=rectangle;whiteSpace=wrap;html=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="60" y="500" width="220" height="140" as="geometry"/>
        </mxCell>

        <mxCell id="enm_result" value="&lt;&lt;enum&gt;&gt;&#xa;Result&#xa;----------------&#xa;WIN&#xa;LOSS&#xa;TIE" style="shape=rectangle;whiteSpace=wrap;html=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="300" y="500" width="220" height="140" as="geometry"/>
        </mxCell>

        <!-- Implementations -->
        <mxCell id="impl_redis" value="RedisStateStore" style="shape=rectangle;whiteSpace=wrap;html=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1200" y="70" width="160" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="impl_pg" value="PostgresStateStore" style="shape=rectangle;whiteSpace=wrap;html=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1200" y="150" width="160" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="impl_random" value="RandomPredictor" style="shape=rectangle;whiteSpace=wrap;html=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1200" y="260" width="160" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="impl_markov" value="MarkovPredictor" style="shape=rectangle;whiteSpace=wrap;html=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1200" y="340" width="160" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="impl_tree" value="DecisionTreePredictor" style="shape=rectangle;whiteSpace=wrap;html=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1200" y="420" width="160" height="60" as="geometry"/>
        </mxCell>

        <!-- Relationships -->
        <mxCell id="r1" style="endArrow=open;html=1;strokeWidth=2;" edge="1" parent="1" source="cls_controller" target="cls_service">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="r2" style="endArrow=open;html=1;strokeWidth=2;" edge="1" parent="1" source="cls_service" target="iface_store">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="r3" style="endArrow=open;html=1;strokeWidth=2;" edge="1" parent="1" source="cls_service" target="iface_pred">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="r4" style="endArrow=diamond;endFill=1;html=1;strokeWidth=2;" edge="1" parent="1" source="cls_state" target="cls_stats">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="r5" style="endArrow=open;html=1;strokeWidth=2;" edge="1" parent="1" source="cls_service" target="cls_state">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="r6" style="endArrow=open;html=1;strokeWidth=2;" edge="1" parent="1" source="cls_service" target="cls_response">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="r7" style="dashed=1;endArrow=block;endFill=0;html=1;strokeWidth=2;" edge="1" parent="1" source="impl_redis" target="iface_store">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="r8" style="dashed=1;endArrow=block;endFill=0;html=1;strokeWidth=2;" edge="1" parent="1" source="impl_pg" target="iface_store">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="r9" style="dashed=1;endArrow=block;endFill=0;html=1;strokeWidth=2;" edge="1" parent="1" source="impl_random" target="iface_pred">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="r10" style="dashed=1;endArrow=block;endFill=0;html=1;strokeWidth=2;" edge="1" parent="1" source="impl_markov" target="iface_pred">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="r11" style="dashed=1;endArrow=block;endFill=0;html=1;strokeWidth=2;" edge="1" parent="1" source="impl_tree" target="iface_pred">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="r12" style="endArrow=open;html=1;strokeWidth=2;" edge="1" parent="1" source="cls_stats" target="enm_result">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="r13" style="endArrow=open;html=1;strokeWidth=2;" edge="1" parent="1" source="cls_state" target="enm_move">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="r14" style="endArrow=open;html=1;strokeWidth=2;" edge="1" parent="1" source="cls_response" target="enm_move">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="r15" style="endArrow=open;html=1;strokeWidth=2;" edge="1" parent="1" source="cls_response" target="enm_result">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
